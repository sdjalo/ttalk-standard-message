{
  "openapi": "3.0.1",
  "servers": [
    {
      "description": "API para Consulta RFB",
      "url": "http://localhost:8081"
    }
  ],
  "info": {
    "description": "API para Consulta RFB",
    "version": "2.000",
    "title": "Consulta RFB",
    "contact": {
      "name": "T-Talk",
      "url": "API.Totvs.com.br",
      "email": "comiteintegracao@totvs.com.br"
    },
    "x-totvs": {
      "messageDocumentation": {
        "name": "Consulta RFB",
        "description": "Joinville",
        "segment": "Logística"
      },
      "productInformation": [
        {
          "product": "sara",
          "contact": "SUPPLY.ML.LOG.SARA-SIP@totvs.com.br",
          "description": "Consulta RFB - Conteúdo de Nota Fiscal",
          "adapter": "proc_rfb_2_2_4.sql",
          "helpUrl": "tdn.totvs.com/pages/viewpage.action?pageId=???"
        }
      ]
    }
  },
  "paths": {
    "/rfb/consultasEstruturadas/v2/conteudoNotaFiscal": {
      "get": {
        "tags": [
          "Conteúdo de Nota Fiscal"
        ],
        "summary": "Consulta RFB - Estruturada - Conteúdo de Nota Fiscal",
        "x-totvs": {
          "productInformation": [
            {
              "product": "sara",
              "available": true,
              "note": "Este verbo esta disponivel com todos os parametros exceto expandable.",
              "minimalVersion": "12.1.37"
            }
          ]
        },
        "description": "ADE COANA/COTEC N°2 DE 26 de setembro de 2003 Anexo Único, seção 2.2 Consulta Estruturada, item 2.2.4 - Conteúdo de Nota Fiscal",
        "operationId": "RestConteudoNotalFiscal.get",
        "parameters": [
          {
            "$ref": "#/components/parameters/KeyAuthentication"
          },
          {
            "$ref": "#/components/parameters/Order"
          },
          {
            "$ref": "#/components/parameters/Page"
          },
          {
            "$ref": "#/components/parameters/PageSize"
          },
          {
            "$ref": "#/components/parameters/NumeroNotaFiscal"
          },
          {
            "$ref": "#/components/parameters/IdTipoNotaFiscal"
          },
          {
            "$ref": "#/components/parameters/CNPJEmissor"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação realizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegistroNotaFiscal"
                }
              }
            }
          },
          "400": {
            "description": "Requisição Inválida",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorModel"
                }
              }
            }
          }
        }
      }
    },
    "/rfb/consultasEstruturadas/v2/conteudoNotaFiscal/xls": {
      "get": {
        "tags": [
          "Conteúdo de Nota Fiscal"
        ],
        "summary": "Consulta RFB - Estruturada - Conteúdo de Nota Fiscal planilha xls.",
        "description": "Conforme ADE parágrafo 2.2.4 - conteúdo de nota fiscal (referida a qualquer operação registrada nos termos do item 1), identificada pelo seu número e correspondente CNPJ emissor; http://normas.receita.fazenda.gov.br/sijut2consulta/link.action?visao=anotado&idAto=3193",
        "operationId": "RestConteudoNotalFiscalXls.get",
        "x-totvs": {
          "productInformation": [
            {
              "product": "sara",
              "available": true,
              "note": "Este verbo esta disponivel com todos os parametros exceto expandable",
              "minimalVersion": "12.1.37"
            }
          ]
        },
        "parameters": [
          {
            "$ref": "#/components/parameters/KeyAuthentication"
          },
          {
            "$ref": "#/components/parameters/Order"
          },
          {
            "$ref": "#/components/parameters/NumeroNotaFiscal"
          },
          {
            "$ref": "#/components/parameters/IdTipoNotaFiscal"
          },
          {
            "$ref": "#/components/parameters/CNPJEmissor"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação realizada com sucesso",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegistroNotaFiscalXls"
                }
              }
            }
          },
          "400": {
            "description": "Requisição Inválida",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorModel"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "parameters": {
      "KeyAuthentication": {
        "name": "keyAuthentication",
        "in": "header",
        "required": true,
        "description": "Cabeçalho usado para Autorização e Autenticação das Requisições",
        "schema": {
          "type": "string"
        }
      },
      "Order": {
        "name": "order",
        "in": "query",
        "description": "Ordenação da Coleção",
        "required": false,
        "schema": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "uniqueItems": true
        }
      },
      "Page": {
        "name": "page",
        "in": "query",
        "description": "Paginação da Coleção",
        "required": false,
        "schema": {
          "type": "integer",
          "format": "int32",
          "default": 1,
          "minimum": 1,
          "exclusiveMinimum": false
        }
      },
      "PageSize": {
        "name": "pageSize",
        "in": "query",
        "description": "Quantidade de Itens por Página",
        "required": false,
        "schema": {
          "type": "integer",
          "format": "int32",
          "default": 10
        }
      },
      "NumeroNotaFiscal": {
        "name": "numeroNotaFiscal",
        "in": "query",
        "description": "Numeração da Nota Fiscal",
        "required": false,
        "schema": {
          "type": "string",
          "pattern": "^\\d{1,30}$",
          "maxLength": 30,
          "default": null
        }
      },
      "IdTipoNotaFiscal": {
        "name": "idTipoNotaFiscal",
        "in": "query",
        "description": "Tipo da Nota Fiscal (0 - Entrada; 1 - Fronteira; 2 - Saída)",
        "required": false,
        "schema": {
          "type": "integer",
          "format": "int32",
          "minimum": 0,
          "default": 0,
          "maximum": 2
        }
      },
      "CNPJEmissor": {
        "name": "CNPJEmissor",
        "in": "query",
        "description": "CNPJ do emissor de nota fiscal",
        "required": false,
        "schema": {
          "type": "string",
          "minimum": 0,
          "default": 0,
          "maximum": 30
        }
      }
    },
    "schemas": {
      "RegistroNotaFiscalXls": {
        "type": "object",
        "properties": {
          "fileName": {
            "type": "string",
            "example": "www.totvs.com.br/sara/arquivos/arquivo_001.xls",
            "description": "Arquivo Xls"
          }
        }
      },
      "RegistroNotaFiscal": {
        "type": "object",
        "allOf": [
          {
            "$ref": "#/components/schemas/Paging"
          },
          {
            "$ref": "#/components/schemas/NotasFiscais"
          }
        ]
      },
      "NotasFiscais": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/NotaFiscal"
            }
          }
        }
      },
      "NotaFiscal": {
        "type": "object",
        "properties": {
          "NumeroNotaFiscal": {
            "type": "string",
            "example": "2018/000000000030-001",
            "description": "Número da nota fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "NumeroNotaFiscal",
                "Required": true,
                "type": "varchar",
                "length": 30,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "SerieNotaFiscal": {
            "type": "string",
            "example": 123,
            "description": "Serie da nota fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "rdec_nf_serie",
                "Required": true,
                "type": "varchar",
                "length": 30,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "ValorTotalNotaFiscal": {
            "type": "number",
            "format": "double",
            "example": "1513,1275",
            "description": "Valor Total da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "ValorTotalNotaFiscal",
                "Required": true,
                "type": "number",
                "length": "18,4",
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "NumeroCnpjCpfDestinatario": {
            "type": "string",
            "example": "97.270.105/1485-15",
            "description": "Número do Documento CNPJ ou CPF do Destinatário da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cli_cgc",
                "Required": false,
                "type": "varchar",
                "length": 18,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "NomeDestinatario": {
            "type": "string",
            "example": "TOTVS S/A",
            "description": "Nome do Destinatário da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cli_nome",
                "Required": false,
                "type": "varchar",
                "length": 100,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "NomePaisDestinatario": {
            "type": "string",
            "example": "BRASIL",
            "description": "País do Destinatário da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cend_pais",
                "Required": false,
                "type": "varchar",
                "length": 30,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "UfDestinatario": {
            "type": "string",
            "example": "SC",
            "description": "UF do Destinatário da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cend_uf",
                "Required": false,
                "type": "varchar",
                "length": 2,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "CidadeDestinatario": {
            "type": "string",
            "example": "JOINVILLE",
            "description": "Cidade do Destinatário da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cend_cidade",
                "Required": false,
                "type": "varchar",
                "length": 30,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "InscricaoEstatualDestinatario": {
            "type": "string",
            "example": "111010945111",
            "description": "Inscrição Estadual do Destinatário da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cli_ie",
                "Required": false,
                "type": "varchar",
                "length": 25,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "CfopNotaFiscal": {
            "type": "string",
            "example": "7.101",
            "description": "CÓDIGO FISCAL DE OPERAÇÕES E PRESTAÇÕES – CFOP, da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cfop_id",
                "Required": false,
                "type": "varchar",
                "length": 5,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "DataSaidaEmissor": {
            "type": "string",
            "format": "date-time",
            "example": "2018-08-12 08:09:50.000 ZZZ",
            "description": "Data de Saída do Emissor",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "dent_dt_emissao",
                "Required": false,
                "type": "datetime",
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "IcmsNotaFiscal": {
            "type": "number",
            "format": "double",
            "example": "11,0750",
            "description": "Valor Total de ICMS da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "dent_com_total_icms",
                "Required": true,
                "type": "number",
                "length": "18,4",
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "IpiNotaFiscal": {
            "type": "number",
            "format": "double",
            "example": "12,1075",
            "description": "Valor Total de IPI da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "dent_com_total_ipi",
                "Required": true,
                "type": "number",
                "length": "18,4",
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "DataEmissaoNotaFiscal": {
            "type": "string",
            "format": "date-time",
            "example": "2018-08-12 08:09:50.000 ZZZ",
            "description": "Data de Emissão da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "dent_dt_emissao",
                "Required": false,
                "type": "datetime",
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "ValorVolumeItemNotaFiscal": {
            "type": "number",
            "format": "double",
            "example": "11,0000000",
            "description": "Volume do Item da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "litem_qt_vol_dec",
                "Required": true,
                "type": "number",
                "length": "18,7",
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "ValorPesoLiquidoItemNotaFiscal": {
            "type": "number",
            "format": "double",
            "example": "8000,0000000",
            "description": "Valor do Peso Líquido do Item da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "litem_peso_liq",
                "Required": true,
                "type": "number",
                "length": "18,7",
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "ValorPesoBrutoItemNotaFiscal": {
            "type": "number",
            "format": "double",
            "example": "8000,0000000",
            "description": "Valor do Peso Bruto do Item da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "litem_peso_bruto",
                "Required": true,
                "type": "number",
                "length": "18,7",
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "NomeItemNotaFiscal": {
            "type": "string",
            "example": "PRODUTO XYZ",
            "description": "Nome do Item da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "litem_descricao",
                "Required": false,
                "type": "varchar",
                "length": 255,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "ValorUnitarioItemNotaFiscal": {
            "type": "number",
            "format": "double",
            "example": "50,0000",
            "description": "Valor Unitário do Item da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "litem_valor_un_br",
                "Required": true,
                "type": "number",
                "length": "18,4",
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "ObservacaoItemNotaFiscal": {
            "type": "string",
            "example": "OBSERVACAO SOBRE O ITEM DA NOTA FISCAL",
            "description": "Observação do Item da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "lote_observacao",
                "Required": false,
                "type": "varchar",
                "length": 255,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "NomeEspecieItemNotaFiscal": {
            "type": "string",
            "example": "CAIXA",
            "description": "Nome da Espécie do Item da Nota Fiscal - Identificação da unidade de carga",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "esp_descricao",
                "Required": true,
                "type": "varchar",
                "length": 80,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "NomeEmissor": {
            "type": "string",
            "example": "TOTVS S/A",
            "description": "Nome do Emissor da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cli_nome",
                "Required": false,
                "type": "varchar",
                "length": 100,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "NumeroCnpjCpfEmissor": {
            "type": "string",
            "example": "97.270.105/1485-15",
            "description": "Número do Documento CNPJ ou CPF do Emissor da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cli_cgc",
                "Required": false,
                "type": "varchar",
                "length": 18,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "NomePaisEmissor": {
            "type": "string",
            "example": "BRASIL",
            "description": "País do Emissor da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cend_pais",
                "Required": false,
                "type": "varchar",
                "length": 30,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "UfEmissor": {
            "type": "string",
            "example": "SC",
            "description": "UF do Emissor da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cend_uf",
                "Required": false,
                "type": "varchar",
                "length": 2,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "CidadeEmissor": {
            "type": "string",
            "example": "JOINVILLE",
            "description": "Cidade do Emissor da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cend_cidade",
                "Required": false,
                "type": "varchar",
                "length": 30,
                "available": true,
                "canUpdate": false
              }
            ]
          },
          "InscricaoEstatualEmissor": {
            "type": "string",
            "example": "111010945111",
            "description": "Inscrição Estadual do Emissor da Nota Fiscal",
            "x-totvs": [
              {
                "product": "sara",
                "Field": "cli_ie",
                "Required": false,
                "type": "varchar",
                "length": 25,
                "available": true,
                "canUpdate": false
              }
            ]
          }
        }
      },
      "Paging": {
        "type": "object",
        "properties": {
          "hasNext": {
            "type": "boolean",
            "example": false
          }
        }
      },
      "ErrorModel": {
        "type": "object",
        "required": [
          "code",
          "message",
          "detailedMessage"
        ],
        "properties": {
          "code": {
            "type": "string",
            "description": "Código identificador do erro."
          },
          "message": {
            "type": "string",
            "description": "Literal no idioma da requisição descrevendo o erro para o cliente."
          },
          "detailedMessage": {
            "type": "string",
            "description": "Mensagem técnica e mais detalhada do erro."
          },
          "helpUrl": {
            "type": "string",
            "format": "uri",
            "description": "URI para a documentação do erro."
          }
        }
      }
    }
  }
}